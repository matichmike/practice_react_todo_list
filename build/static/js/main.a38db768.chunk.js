(this.webpackJsonprosedispatch=this.webpackJsonprosedispatch||[]).push([[0],{14:function(e,t,a){},16:function(e,t,a){},18:function(e,t,a){"use strict";a.r(t);for(var n=a(0),r=a.n(n),o=a(8),c=a.n(o),l=(a(14),a(1)),i=function(){for(var e=[],t=0;t<7;++t)e.push({hours:new Array(24)});return e},s=function(){for(var e=[],t=0;t<52;++t)e.push({days:i()});return e},u=(a(16),a(3)),m=Object(u.a)((function(e){var t=e.viewModel;return r.a.createElement("div",null,r.a.createElement("form",null,r.a.createElement("select",{className:"form-control",value:t.activeDriver,name:"Drivers",id:"Drivers",onChange:function(e){var a=e.target.value;t.activeDriver=a}},t.drivers.map((function(e,t){return r.a.createElement("option",{key:"".concat(e,"-").concat(t),value:e},e)})))))})),d=Object(u.a)((function(e){var t=e.viewModel;return r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{className:"btn btn-primary",onClick:function(){t.activeWeek<1||t.activeWeek--}},"\u2190"),r.a.createElement("label",{className:"card-header"},"Week ",t.activeWeek+1),r.a.createElement("button",{className:"btn btn-success",onClick:function(){t.activeWeek>52||t.activeWeek++}},"\u2192"))})),v=function(e,t){var a=e.activeDriver,n=e.activeWeek,r=e.driverTimeline[a];if(r)return r[n].days[t]},f=function(e,t,a){var n=e.tasks,r=v(e,t).hours[a];return n.get(r)},p=function(e,t,a){var n=a.id,r=a.driver,o=e.driverTimeline[r][e.activeWeek].days[t].hours;Object(l.o)((function(){for(var t=0;t<24;++t)o[t]===n&&(o[t]=null);e.tasks.delete(n)}))},h=Object(u.a)((function(e){for(var t=e.viewModel,a=[],n={},o=0;o<25;o++){for(var c=[r.a.createElement("td",null,o,":00")],l=0;l<7;l++){var i=f(t,l,o),s=null;n[i]||function(){var e=l,a=i;n[i]=!0,s=r.a.createElement("button",{onClick:function(){p(t,e,a)}},"delete")}(),i&&(i=r.a.createElement("div",null,i.type," - ",i.description," ",s)),c.push(r.a.createElement("td",null,i||"-"))}a.push(r.a.createElement("tr",null,c))}return r.a.createElement("div",null,r.a.createElement("table",{style:{width:"100%"}},r.a.createElement("tr",null,r.a.createElement("th",null),r.a.createElement("th",null,"Monday"),r.a.createElement("th",null,"Tuesday"),r.a.createElement("th",null,"Wednesday"),r.a.createElement("th",null,"Thursday"),r.a.createElement("th",null,"Friday"),r.a.createElement("th",null,"Saturday"),r.a.createElement("th",null,"Sunday")),a))})),E=a(4),y=a(5),b=function e(){var t=this;Object(y.a)(this,e),this.addDayRecord=function(e,a){t.records[e]?t.records[e]+=a:t.records[e]=a},this.closeDay=function(){t.daysCount++},this.records={},this.daysCount=0},w=function e(t,a){var n=this;Object(y.a)(this,e),this.addDayRecords=function(e){var t,a=Object(E.a)(e);try{for(a.s();!(t=a.n()).done;){var r=t.value;n.__addDayRecordInternal(r.type,r.count)}}catch(o){a.e(o)}finally{a.f()}n.entries[n.entries.length-1].closeDay()},this.__addDayRecordInternal=function(e,t){var a;n.entries.length?(a=n.entries[n.entries.length-1]).daysCount===n.period&&(a=new b,n.entries.push(a)):(a=new b,n.entries.push(a)),a.addDayRecord(e,t)},this.print=function(){var e=[],t="Time-Frame,".concat(n.types.join(","));e.push(t);var a,r=0,o=Object(E.a)(n.entries);try{var c=function(){var t=a.value,o="DAYS ".concat(r+1," - ").concat(r+n.period,",")+n.types.map((function(e){return t.records[e]||0})).map((function(e){return""+e})).join(",");e.push(o),r+=n.period};for(o.s();!(a=o.n()).done;)c()}catch(l){o.e(l)}finally{o.f()}return e.join("\n")},this.period=t,this.entries=[],this.types=a},k=["Pick-up","Drop-off","Other"],D=function(e){var t=e.viewModel,a=r.a.useRef();return r.a.createElement(r.a.Fragment,null,r.a.createElement("select",{className:"form-control",ref:a,name:"Schedule Input"},r.a.createElement("option",{value:"2"},"2 days"),r.a.createElement("option",{value:"4"},"4 days"),r.a.createElement("option",{value:"7"},"7 days"),r.a.createElement("option",{value:"14"},"14 days"),r.a.createElement("option",{value:"28"},"28 days")),r.a.createElement("button",{className:"btn btn-success",onClick:function(){var e=Number.parseInt(a.current.value);!function(e){var t=document.createElement("a");t.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(e)),t.setAttribute("download","report.csv"),t.style.display="none",document.body.appendChild(t),t.click(),document.body.removeChild(t)}(function(e,t){for(var a=new w(t,k),n=e.activeDriver,r=e.driverTimeline,o=e.tasks,c=r[n],l=0;l<52;l++)for(var i=c[l].days,s=function(e){for(var t=i[e].hours,n=new Set,r=0;r<24;r++){var c=t[r];c&&n.add(c)}var l,s=new Map,u=Object(E.a)(k);try{for(u.s();!(l=u.n()).done;){var m=l.value;s.set(m,{count:0})}}catch(v){u.e(v)}finally{u.f()}n.size&&(n=Array.from(n).map((function(e){return o.get(e)}))).forEach((function(e){s.get(e.type).count++}));var d=Array.from(s.entries()).map((function(e){return{type:e[0],count:e[1].count}}));a.addDayRecords(d)},u=0;u<7;u++)s(u);return a.print()}(t,e))}},"CSV"))},N=a(20),g=[],O=0;O<24;O++)g.push(O);var T=function(e){var t=e.viewModel,a=r.a.useRef(),n=r.a.useRef(),o=r.a.useRef(),c=r.a.useRef(),i=r.a.useRef(),s=r.a.useRef();return r.a.createElement(r.a.Fragment,null,r.a.createElement("select",{required:!0,className:"form-control",ref:a,name:"Task Type"},r.a.createElement("option",null,"Select Task Type"),r.a.createElement("option",{value:"Pick-up"},"Pick-Up"),r.a.createElement("option",{value:"Drop-off"},"Drop-Off"),r.a.createElement("option",{value:"Other"},"Other")),r.a.createElement("select",{required:!0,className:"form-control",ref:c,name:"Day Selection"},r.a.createElement("option",null,"Select Day"),r.a.createElement("option",{value:"0"},"Monday"),r.a.createElement("option",{value:"1"},"Tuesday"),r.a.createElement("option",{value:"2"},"Wednesday"),r.a.createElement("option",{value:"3"},"Thursday"),r.a.createElement("option",{value:"4"},"Friday"),r.a.createElement("option",{value:"5"},"Saturday"),r.a.createElement("option",{value:"6"},"Sunday")),r.a.createElement("select",{required:!0,className:"form-control",ref:i,name:"Hour From"},r.a.createElement("option",null,"From"),g.map((function(e){return r.a.createElement("option",null," ",e,":00 ")}))),r.a.createElement("select",{required:!0,className:"form-control",ref:s,name:"Hour To"},r.a.createElement("option",null,"To"),g.map((function(e){return r.a.createElement("option",null," ",e,":00 ")}))),r.a.createElement("input",{required:!0,className:"form-control",ref:n,name:"location",type:"text",placeholder:"Location"}),r.a.createElement("input",{required:!0,className:"form-control",ref:o,name:"description",type:"text",placeholder:"Description"}),r.a.createElement("button",{style:{width:"inherit"},className:"btn btn-success",onClick:function(){var e=a.current.value;if(!e)return alert("Please select Type first");var r=n.current.value,u=o.current.value,m=c.current.value,d=Number.parseInt(i.current.value),f=Number.parseInt(s.current.value);if(f<d)return alert("Invalid time range!");for(var p=v(t,m),h=new Set,E=d;E<=f;E++){var y=p.hours[E];y&&h.add(y)}if(!h.size||window.confirm("Do you want to overwrite the existing tasks?")){var b=Object(N.a)(),w={id:b,type:e,location:r,description:u,driver:t.activeDriver};Object(l.o)((function(){if(t.tasks.set(b,w),h.size){for(var e=0;e<24;++e){var a=p.hours[e];h.has(a)&&(p.hours[e]=null),e>=d&&e<=f&&(p.hours[e]=b)}for(var n=0,r=Array.from(h);n<r.length;n++){var o=r[n];t.tasks.delete(o)}}else for(var c=d;c<=f;c++)p.hours[c]=b}))}}},"Add new task"))};var j=function(){var e=Object(n.useRef)(Object(l.l)({drivers:["John","Ben","Ken"],tasks:new Map,activeDriver:"John",driverTimeline:{John:s(),Ben:s(),Ken:s()},activeWeek:0})).current;return r.a.createElement("div",{className:"Page"},r.a.createElement("div",{className:"Control-Panel"},r.a.createElement("div",{className:"Driver-Schedule"},r.a.createElement("label",{className:"card-header"},"Driver:"),r.a.createElement(m,{viewModel:e})),r.a.createElement("div",{className:"Week-Toggle"},r.a.createElement(d,{viewModel:e})),r.a.createElement("div",{className:"Download-Schedule"},r.a.createElement(D,{viewModel:e}))),r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-3"},r.a.createElement(T,{viewModel:e})),r.a.createElement("div",{className:"col-9"},r.a.createElement(h,{viewModel:e})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(17);c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(j,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},9:function(e,t,a){e.exports=a(18)}},[[9,1,2]]]);
//# sourceMappingURL=main.a38db768.chunk.js.map